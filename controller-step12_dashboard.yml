#!/usr/bin/env ansible-playbook

- name: Configure Dashboard
  hosts: controller
  remote_user: root
  sudo: True
  tasks:
  - name: APT Install Packages
    action: apt pkg={{ item }} state=installed
    with_items:
      - openstack-dashboard
      - libapache2-mod-wsgi 
      - memcached 
      - python-memcache


  - name: Configure 'local_settings.py'
    template: src=templates/controller/local_settings.py.j2 dest=/etc/openstack-dashboard/local_settings.py owner=root group=root mode=0644

  - name: Restart Dashboard Related Services
    service: name={{ item }} state=restarted     
    with_items:
    - nova-api
#    - nova-compute
    - apache2
    - memcached


        



